"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}();!function(d){if("undefined"==typeof JMS_Covid)return;Number.prototype.format=function(e,t){var n="(\\d)(?=(\\d{"+(t||3)+"})+"+(0<e?"\\.":"$")+")";return this.toFixed(Math.max(0,~~e)).replace(new RegExp(n,"g"),"$1,")};var t=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,elementorModules.frontend.handlers.Base),_createClass(t,[{key:"getDefaultSettings",value:function(){}},{key:"getDefaultElements",value:function(){}},{key:"bindEvents",value:function(){JMS_Covid.countries.sort(function(e,t){return e.cases-t.cases});for(var e=JMS_Covid.countries,t=0;t<e.length;t++){var n=this.$element.find('.jms-covid-live-map [title="'+e[t].country+'"]'),a=0;if(n.length){var o=e[t].cases||0,r=e[t].deaths||0,i=e[t].recovered||0;if("2"===JMS_Covid.country_comfirm_cl_type){1<=o&&(a=1);for(var s=JMS_Covid.number_of_case,c=0;c<s.length;c++)s[c]<=o&&(a=c+1);n.attr("data-level",a)}else"1"===JMS_Covid.country_comfirm_cl_type&&(a=1/e.length*(t+1),n.css({fill:JMS_Covid.country_confirm_cl,fillOpacity:a}));n.attr("data-cases",o.format()),n.attr("data-deaths",r.format()),n.attr("data-recovered",i.format())}}var l;this.$element.find(".jms-covid-live-map").each(function(e){var a=d(this),o=a.find(".tooltip_nCoV"),t=a.find("path"),n=a.find("svg"),r=o.attr("data-confirmed"),i=o.attr("data-deaths"),s=o.attr("data-recovered");t.mouseenter(function(){d(this).css({stroke:JMS_Covid.country_cl_border_hover});var e=a.attr("data-cases")?d(this).attr("data-cases"):0,t=a.attr("data-deaths")?d(this).attr("data-deaths"):0,n=a.attr("data-recovered")?d(this).attr("data-recovered"):0;o.addClass("active"),o.html('<span class="country-name">'+d(this).attr("title")+'</span><br/><span class="confirmed-case">'+r+": "+e+'</span><br/><span class="deaths-case">'+i+": "+t+'</span><br/><span class="recovered-case">'+s+": "+n+"</span>")}).mouseleave(function(){d(this).css("stroke",""),o.removeClass("active")}),n.on("mousemove",function(e){o.css({left:e.offsetX+40,top:e.offsetY+30})})}),this.$element.find(".cv-tab-wrapper").trigger("init-tabs"),void 0!==d.fn.dataTable&&(this.$element.find(".table_countries_today").each(function(){var e=d(this).attr("id");e&&d("#"+e).dataTable({order:[[1,"desc"]],info:!0,paging:!0,lengthChange:!0,lengthMenu:[[15,30,-1],[15,30,"All"]],responsive:!0})}),this.$element.find(".table_countries").each(function(){var e=d(this).attr("id");e&&d("#"+e).dataTable({scrollY:230,scrollCollapse:!0,order:[[1,"desc"]],info:!1,searching:!1,paging:!1,responsive:!0})})),"undefined"!=typeof Hammer&&(l={haltEventListeners:["touchstart","touchend","touchmove","touchleave","touchcancel"],init:function(e){var t=e.instance,n=1,a=0,o=0;this.hammer=Hammer(e.svgElement,{inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput}),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("doubletap",function(e){t.zoomIn()}),this.hammer.on("panstart panmove",function(e){"panstart"===e.type&&(o=a=0),t.panBy({x:e.deltaX-a,y:e.deltaY-o}),a=e.deltaX,o=e.deltaY}),this.hammer.on("pinchstart pinchmove",function(e){"pinchstart"===e.type&&(n=t.getZoom(),t.zoomAtPoint(n*e.scale,{x:e.center.x,y:e.center.y})),t.zoomAtPoint(n*e.scale,{x:e.center.x,y:e.center.y})}),e.svgElement.addEventListener("touchmove",function(e){e.preventDefault()})},destroy:function(){this.hammer.destroy()}}),"undefined"!=typeof svgPanZoom&&this.$element.find(".jms-covid-svg-map").each(function(e){var t=svgPanZoom(this,{zoomEnabled:1,controlIconsEnabled:!1,fit:1,center:1,customEventsHandler:l});d(this).parent().find(".zoom-in").on("click",function(e){e.preventDefault(),t.zoomIn()}),d(this).parent().find(".zoom-out").on("click",function(e){e.preventDefault(),t.zoomOut()})})}}]),t}();d(window).on("elementor/frontend/init",function(){elementorFrontend.hooks.addAction("frontend/element_ready/jms_covid.default",function(e){elementorFrontend.elementsHandler.addHandler(t,{$element:e})})})}(jQuery);