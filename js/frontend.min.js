!function(d){"use strict";if("undefined"==typeof JMS_Covid)return;d(function(){var a;t.ready(),"undefined"!=typeof Hammer&&(a={haltEventListeners:["touchstart","touchend","touchmove","touchleave","touchcancel"],init:function(t){var e=t.instance,a=1,n=0,o=0;this.hammer=Hammer(t.svgElement,{inputClass:Hammer.SUPPORT_POINTER_EVENTS?Hammer.PointerEventInput:Hammer.TouchInput}),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("doubletap",function(t){e.zoomIn()}),this.hammer.on("panstart panmove",function(t){"panstart"===t.type&&(o=n=0),e.panBy({x:t.deltaX-n,y:t.deltaY-o}),n=t.deltaX,o=t.deltaY}),this.hammer.on("pinchstart pinchmove",function(t){"pinchstart"===t.type&&(a=e.getZoom(),e.zoomAtPoint(a*t.scale,{x:t.center.x,y:t.center.y})),e.zoomAtPoint(a*t.scale,{x:t.center.x,y:t.center.y})}),t.svgElement.addEventListener("touchmove",function(t){t.preventDefault()})},destroy:function(){this.hammer.destroy()}}),"undefined"!=typeof svgPanZoom&&d(".jms-covid-svg-map").each(function(t){var e=svgPanZoom(this,{zoomEnabled:1,controlIconsEnabled:!1,fit:1,center:1,customEventsHandler:a});d(this).parent().find(".zoom-in").on("click",function(t){t.preventDefault(),e.zoomIn()}),d(this).parent().find(".zoom-out").on("click",function(t){t.preventDefault(),e.zoomOut()})}),d("body").on("init-tabs",".cv-tab-wrapper",function(){d(this).find(".cv-nav-tabs").each(function(){d(this).find(".cv-tab-panel").hide(),d(this).find("li:first a").click()}),d.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()}).on("click",".cv-nav-tabs li a",function(t){t.preventDefault();var e=d(this),a=e.closest(".cv-tab-wrapper");a.find(".cv-nav-tabs").find("li").removeClass("active"),a.find(".cv-tab-panel").hide(),e.closest("li").addClass("active"),a.find(e.attr("href")).show(),d.fn.dataTable.tables({visible:!0,api:!0}).responsive.recalc().columns.adjust(),setTimeout(function(){d.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust()},100)}),d(".cv-tab-wrapper").trigger("init-tabs"),void 0!==d.fn.dataTable&&(d(".table_countries_today").each(function(){var t=d(this).attr("id");t&&d("#"+t).dataTable({order:[[1,"desc"]],info:!0,paging:!0,lengthChange:!0,lengthMenu:[[15,30,-1],[15,30,"All"]],responsive:!0})}),d(".table_countries").each(function(){var t=d(this).attr("id");t&&d("#"+t).dataTable({scrollY:230,scrollCollapse:!0,order:[[1,"desc"]],info:!1,searching:!1,paging:!1,responsive:!0})}))}),d(window).load(function(){t.load()});var t=window.$jms_covid19={ready:function(){this.map()},load:function(){JMS_Covid.countries.sort(function(t,e){return t.cases-e.cases});for(var t=JMS_Covid.countries,e=0;e<t.length;e++){var a=d('.jms-covid-live-map [title="'+t[e].country+'"]'),n=0;if(a.length){var o=t[e].cases||0,s=t[e].deaths||0,i=t[e].recovered||0;if(console.log(t[e].country),console.log(t[e].recovered),"2"===JMS_Covid.country_comfirm_cl_type){1<=o&&(n=1);for(var r=JMS_Covid.number_of_case,c=0;c<r.length;c++)r[c]<=o&&(n=c+1);a.attr("data-level",n)}else"1"===JMS_Covid.country_comfirm_cl_type&&(n=1/t.length*(e+1),a.css({fill:JMS_Covid.country_confirm_cl,fillOpacity:n}));a.attr("data-cases",o.format()),a.attr("data-deaths",s.format()),a.attr("data-recovered",i.format())}}},map:function(){d(".jms-covid-live-map").each(function(t){var e=d(this),n=e.find(".tooltip_nCoV"),a=e.find("path"),o=e.find("svg"),s=n.attr("data-confirmed"),i=n.attr("data-deaths"),r=n.attr("data-recovered");a.mouseenter(function(){d(this).css({stroke:JMS_Covid.country_cl_border_hover});var t=d(this).attr("data-cases")?d(this).attr("data-cases"):0,e=d(this).attr("data-deaths")?d(this).attr("data-deaths"):0,a=d(this).attr("data-recovered")?d(this).attr("data-recovered"):0;n.addClass("active"),n.html('<span class="country-name">'+d(this).attr("title")+'</span><br/><span class="confirmed-case">'+s+": "+t+'</span><br/><span class="deaths-case">'+i+": "+e+'</span><br/><span class="recovered-case">'+r+": "+a+"</span>")}).mouseleave(function(){d(this).css("stroke",""),n.removeClass("active")}),o.on("mousemove",function(t){n.css({left:t.offsetX+40,top:t.offsetY+30})})})}};Number.prototype.format=function(t,e){var a="(\\d)(?=(\\d{"+(e||3)+"})+"+(0<t?"\\.":"$")+")";return this.toFixed(Math.max(0,~~t)).replace(new RegExp(a,"g"),"$1,")}}(jQuery);